// ============================================
// MarchesBTP - Model Entreprise
// Profil Entreprise
// ============================================

model Entreprise {
  id                  Int              @id @default(autoincrement())
  userId              Int              @unique @map("user_id")

  // Identite entreprise
  raisonSociale       String           @map("raison_sociale")
  siret               String           @unique
  formeJuridique      String?          @map("forme_juridique")
  nafCode             String?          @map("naf_code")
  representantLegal   String?          @map("representant_legal")

  // Contact
  email               String?
  telephone           String?

  // Adresse
  adresse             String?
  ville               String?
  codePostal          String?          @map("code_postal")

  // Documents
  kbisPath            String?          @map("kbis_path")
  description         String?          @db.Text

  // Statut
  statutCompte        StatutCompte     @default(EN_ATTENTE) @map("statut_compte")
  isActive            Boolean          @default(true) @map("is_active")

  // Timestamps
  dateInscription     DateTime         @default(now()) @map("date_inscription")

  // Relations
  user                User             @relation(fields: [userId], references: [id], onDelete: Cascade)
  appelsOffres        AppelOffre[]
  contrats            Contrat[]
  candidatures        AppelOffreCandidature[]
  signatures          ContractSignature[]

  @@map("entreprises")
  @@index([siret])
  @@index([statutCompte])
  @@index([nafCode])
}
